// http://craig.is/making/rainbows
window.Rainbow=function(){function k(a,b){var c=a.getAttribute&&a.getAttribute(b)||null;if(!c){var d=a.attributes,e=d.length,f;for(f=0;f<e;++f)b[f].nodeName===b&&(c=b[f].nodeValue)}return c}function l(a,b){a.className+=a.className?" "+b:b}function m(a,b){return(" "+a.className+" ").indexOf(" "+b+" ")>-1}function n(a,b,c,d){return c>=a&&c<b?!0:d>a&&d<b}function o(a,b,c,d){return c==a&&d==b?!1:c<=a&&d>=b}function p(c,d){for(var f in b[e]){f=parseInt(f,10),o(f,b[e][f],c,d)&&(delete b[e][f],delete a[e][f]);if(n(f,b[e][f],c,d))return!0}return!1}function q(a,b){return'<span class="'+a.replace(/\./g," ")+(i?" "+i:"")+'">'+b+"</span>"}function r(a,b){var c=0,d;for(d=1;d<b;++d)a[d]&&(c+=a[d].length);return c}function s(c,d,f,h){var i=c.exec(f);if(!i)return h();++g,!d.name&&d.matches[0]&&(d.name=d.matches[0],delete d.matches[0]);var j=i[0],k=i.index,l=i[0].length+k,m=function(){var a=function(){s(c,d,f,h)};return g%100>0?a():setTimeout(a,0)};if(p(k,l))return m();var n=function(c){d.name&&(c=q(d.name,c)),a[e]||(a[e]={},b[e]={}),a[e][k]={replace:i[0],"with":c},b[e][k]=l,m()},o=w(d.matches),t=function(a,b,c){if(a>=b.length)return c(j);var e=function(){t(++a,b,c)},f=i[b[a]];if(!f)return e();var g=d.matches[b[a]],h=g.language;if(h)return z(f,h,function(a){j=j.replace(f,a),e()});if(typeof g=="object")return x(f,g.length?g:[g],function(a){j=j.replace(f,a),e()});var k=r(i,b[a]);j=v(k,f,q(g,f),j),e()};t(0,o,n)}function t(a){return d[a]}function u(a){var b=c[a]||[],d=c[f]||[];return t(a)?b:b.concat(d)}function v(a,b,c,d){var e=d.substr(a);return d.substr(0,a)+e.replace(b,c)}function w(a){var b=[],c,d;for(var e in a)a.hasOwnProperty(e)&&b.push(e);return b.sort(function(a,b){return b-a})}function x(c,d,f){function g(d,h){if(h<d.length)return s(d[h].pattern,d[h],c,function(){g(d,++h)});y(c,function(c){delete a[e],delete b[e],--e,f(c)})}++e,g(d,0)}function y(b,c){function d(b,c,f,g){if(f<c.length){++h;var i=c[f],j=a[e][i];b=v(i,j.replace,j["with"],b);var k=function(){d(b,c,++f,g)};return h%250>0?k():setTimeout(k,0)}g(b)}var f=w(a[e]);d(b,f,0,c)}function z(a,b,c){var d=u(b);x(a,d,function(a){c(a)})}function A(c,d,e){if(d<c.length){var f=k(c[d],"data-language")||k(c[d].parentNode,"data-language");return!m(c[d],"rainbow")&&f?(f=f.toLowerCase(),l(c[d],"rainbow"),z(c[d].innerHTML,f,function(g){c[d].innerHTML=g,a={},b={},j&&j(c[d],f),setTimeout(function(){A(c,++d,e)},0)})):A(c,++d,e)}e&&e()}function B(a,b){var c=(a||document).getElementsByTagName("pre"),d=(a||document).getElementsByTagName("code"),e,f=[];for(e=0;e<d.length;++e)f.push(d[e]);for(e=0;e<c.length;++e)c[e].getElementsByTagName("code").length||f.push(c[e]);A(f,0,b)}var a={},b={},c={},d={},e=0,f=0,g=0,h=0,i,j;return{extend:function(a,b,e){arguments.length==1&&(b=a,a=f),d[a]=e,c[a]=b.concat(c[a]||[])},onHighlight:function(a){j=a},addClass:function(a){i=a},color:function(){if(typeof arguments[0]=="string")return z(arguments[0],arguments[1],arguments[2]);if(typeof arguments[0]=="function")return B(null,arguments[0]);B(arguments[0]instanceof Event?null:arguments[0],arguments[1])}}}(),Rainbow.extend([{matches:{1:{name:"keyword.operator",pattern:/\=/g},2:"string"},pattern:/(\(|\s|\[|\=)(('|")[\s\S]*?(\3))/gm},{name:"comment",pattern:/\/\*[\s\S]*?\*\/|(\/\/|\#)[\s\S]*?$/gm},{name:"integer",pattern:/\b(0x[\da-f]+|\d+)\b/g},{name:"constant",pattern:/\b[A-Z0-9_]{2,}\b/g},{matches:{1:"keyword"},pattern:/\b(and|array|as|bool(ean)?|c(atch|har|lass|onst)|d(ef|elete|ie|o(uble)?)|e(cho|lse(if)?|xit|xtends)|f(inally|loat|or(each)?|unction)|global|if|import|int(eger)?|long|new|object|or|pr(int|ivate|otected)|public|return|self|st(ring|ruct|atic)|switch|th(en|is|row)|try|(un)?signed|var|void|while)(?=\(|\b)/g},{name:"constant.language",pattern:/true|false|null/g},{name:"keyword.operator",pattern:/\+|\!|\-|&(gt|lt|amp);|\||\*|\=/g},{matches:{1:"function.call"},pattern:/(\w+?)(?=\()/g},{matches:{1:"keyword",2:"meta.function-call"},pattern:/(function)\s(.*?)(?=\()/g}]),function(){if(window.addEventListener)return window.addEventListener("load",Rainbow.color,!1);window.attachEvent("onload",Rainbow.color)}(),Rainbow.onHighlight=Rainbow.onHighlight,Rainbow.addClass=Rainbow.addClass,Rainbow.color=Rainbow.color,Rainbow.extend("javascript",[{name:"selector",pattern:/\s\$(?=\.|\()/g},{name:"support",pattern:/\b(window|document)\b/g},{matches:{1:"support.property"},pattern:/\.(length|node(Name|Value))\b/g},{matches:{1:"support.function"},pattern:/(setTimeout|setInterval)(?=\()/g},{matches:{1:"support.method"},pattern:/\.(getAttribute|push|getElementById|getElementsByClassName|log|setTimeout|setInterval)(?=\()/g},{name:"constant.regex",matches:{1:"support.regex.open",2:{name:"constant.regex.escape",pattern:/\\(.){1}/g},3:"support.regex.close",4:"support.regex.modifier"},pattern:/(\/)(.+)(\/)([igm]{0,3})/g},{name:"meta.function-call",pattern:/(\w+)(?=:\s{0,}function)/g},{matches:{2:[{name:"string",pattern:/('|")(.*?)(\1)/g},{name:"meta.script-tag",pattern:/(\w+)/g}]},pattern:/(&lt;\/?)(script(.*?))(&gt;)/g}])


// https://github.com/eternicode/bootstrap-datepicker
!function(c){var a=function(e,d){this.element=c(e);this.options=d;this.format=b.parseFormat(d.format||this.element.data("date-format")||"mm/dd/yyyy");this.picker=c(b.template).appendTo("body").on({click:c.proxy(this.click,this),mousedown:c.proxy(this.mousedown,this)});this.isInput=this.element.is("input");this.component=false;if(this.isInput){this.element.on({focus:c.proxy(this.show,this),blur:c.proxy(this.hide,this),keyup:c.proxy(this.update,this)})}else{if(this.component){this.component.on("click",c.proxy(this.show,this))}else{this.element.on("click",c.proxy(this.show,this))}}if(this.options.minDate){this.options.minDate.setHours(0);this.options.minDate.setMinutes(0);this.options.minDate.setSeconds(0);this.options.minDate.setMilliseconds(0)}if(this.options.maxDate){this.options.maxDate.setHours(0);this.options.maxDate.setMinutes(0);this.options.maxDate.setSeconds(0);this.options.maxDate.setMilliseconds(0)}this.viewMode=0;this.weekStart=d.weekStart||this.element.data("date-weekstart")||0;this.weekEnd=this.weekStart==0?6:this.weekStart-1;this.fillDow();this.fillMonths();this.update();this.showMode()};a.prototype={constructor:a,show:function(d){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();c(window).on("resize",c.proxy(this.place,this));if(d){d.stopPropagation();d.preventDefault()}if(!this.isInput){c(document).on("mousedown",c.proxy(this.hide,this))}this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide();c(window).off("resize",this.place);this.viewMode=0;this.showMode();if(!this.isInput){c(document).off("mousedown",this.hide)}this.element.trigger({type:"hide",date:this.date})},setValue:function(d){d=d?d:this.date;var e=b.formatDate(d,this.format);if(!this.isInput){if(this.component){this.element.find("input").prop("value",e)}this.element.data("date",e)}else{this.element.prop("value",e)}},place:function(){var d=this.component?this.component.offset():this.element.offset();this.picker.css({top:d.top+this.height,left:d.left})},update:function(){var d=this.isInput?this.element.prop("value"):this.element.data("date");this.date=d?b.parseDate(d,this.format):new Date();this.viewDate=new Date(this.date);this.fill()},fillDow:function(){var d=this.weekStart;var e="<tr>";while(d<this.weekStart+7){e+='<th class="dow">'+b.dates.daysMin[(d++)%7]+"</th>"}e+="</tr>";this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){var e="";var d=0;while(d<12){e+='<span class="month">'+b.dates.monthsShort[d++]+"</span>"}this.picker.find(".datepicker-months td").append(e)},fill:function(){var o=new Date(this.viewDate),p=o.getFullYear(),n=o.getMonth(),f=this.date.valueOf();this.picker.find(".datepicker-days th:eq(1)").text(b.dates.months[n]+" "+p);var j=new Date(p,n-1,28,0,0,0,0),q=b.getDaysInMonth(j.getFullYear(),j.getMonth());j.setDate(q);j.setDate(q-(j.getDay()-this.weekStart+7)%7);var l=new Date(j);l.setDate(l.getDate()+42);l=l.valueOf();html=[];var h;while(j.valueOf()<l){if(j.getDay()==this.weekStart){html.push("<tr>")}h="";if(this.options.minDate&&this.options.minDate>j){h+=" invalid"}else{if(this.options.maxDate&&this.options.maxDate<j){h+=" invalid"}else{if(j.getMonth()<n){h+=" old"}else{if(j.getMonth()>n){h+=" new"}}}}if(j.valueOf()==f){h+=" active"}html.push('<td class="day'+h+'">'+j.getDate()+"</td>");if(j.getDay()==this.weekEnd){html.push("</tr>")}j.setDate(j.getDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(html.join(""));var m=this.date.getFullYear();var e=this.picker.find(".datepicker-months").find("th:eq(1)").text(p).end().find("span").removeClass("active");if(m==p){e.eq(this.date.getMonth()).addClass("active")}html="";p=parseInt(p/10,10)*10;var g=this.picker.find(".datepicker-years").find("th:eq(1)").text(p+"-"+(p+9)).end().find("td");p-=1;for(var k=-1;k<11;k++){html+='<span class="year'+(k==-1||k==10?" old":"")+(m==p?" active":"")+'">'+p+"</span>";p+=1}g.html(html)},click:function(i){i.stopPropagation();i.preventDefault();var h=c(i.target).closest("span, td, th");if(h.length==1){switch(h[0].nodeName.toLowerCase()){case"th":switch(h[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+b.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+b.modes[this.viewMode].navFnc].call(this.viewDate)+b.modes[this.viewMode].navStep*(h[0].className=="prev"?-1:1));this.fill();break}break;case"span":if(h.is(".month")){var g=h.parent().find("span").index(h);this.viewDate.setMonth(g)}else{var f=parseInt(h.text(),10)||0;this.viewDate.setFullYear(f)}this.showMode(-1);this.fill();break;case"td":if(h.is(".day")){if(h.is(".invalid")){return}var d=parseInt(h.text(),10)||1;var g=this.viewDate.getMonth();if(h.is(".old")){g-=1}else{if(h.is(".new")){g+=1}}var f=this.viewDate.getFullYear();this.date=new Date(f,g,d,0,0,0,0);this.viewDate=new Date(f,g,d,0,0,0,0);this.fill();this.setValue();this.hide();this.element.blur();this.element.trigger({type:"changeDate",date:this.date})}break}}},mousedown:function(d){d.stopPropagation();d.preventDefault()},showMode:function(d){if(d){this.viewMode=Math.max(0,Math.min(2,this.viewMode+d))}this.picker.find(">div").hide().filter(".datepicker-"+b.modes[this.viewMode].clsName).show()}};c.fn.datepicker=function(e){var d=arguments;return this.each(function(){var h=c(this),g=h.data("datepicker"),f=typeof e=="object"&&e;if(!g){h.data("datepicker",(g=new a(this,c.extend({},c.fn.datepicker.defaults,f))))}if(typeof e=="string"){g[e].apply(g,Array.prototype.slice.call(d,1))}})};c.fn.datepicker.defaults={};c.fn.datepicker.Constructor=a;var b={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(d){return(((d%4===0)&&(d%100!==0))||(d%400===0))},getDaysInMonth:function(d,e){return[31,(b.isLeapYear(d)?29:28),31,30,31,30,31,31,30,31,30,31][e]},parseFormat:function(f){var e=f.match(/[.\/-].*?/),d=f.split(/\W+/);if(!e||!d||d.length==0){throw new Error("Invalid date format.")}return{separator:e,parts:d}},parseDate:function(d,h){var g=d.split(h.separator),d=new Date(1970,1,1,0,0,0),j;if(g.length==h.parts.length){for(var f=0,e=h.parts.length;f<e;f++){j=parseInt(g[f],10)||1;switch(h.parts[f]){case"dd":case"d":d.setDate(j);break;case"mm":case"m":d.setMonth(j-1);break;case"yy":d.setFullYear(2000+j);break;case"yyyy":d.setFullYear(j);break}}}return d},formatDate:function(d,g){var h={d:d.getDate(),m:d.getMonth()+1,yy:d.getFullYear().toString().substring(2),yyyy:d.getFullYear()};h.dd=(h.d<10?"0":"")+h.d;h.mm=(h.m<10?"0":"")+h.m;var d=[];for(var f=0,e=g.parts.length;f<e;f++){d.push(h[g.parts[f]])}return d.join(g.separator)},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};b.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+b.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+b.headTemplate+b.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+b.headTemplate+b.contTemplate+"</table></div></div>"}(window.jQuery);